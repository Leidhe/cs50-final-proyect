{% extends 'courses/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block style %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }
</style>
{% endblock %}
{% block main %}
<div id="wrap">
    <div id="main">
        <div class="container">

            <h1 class="title">{{task.name}}</h1>
            <div>
                {{task.content | safe}}
            </div>

            <div id="answer">
                <p><strong>Student:</strong> {{homework.student.first_name}} {{homework.student.last_name}}</p>
                <p><strong>Answer:</strong> {{homework.answer | safe}}</p>
                <p><strong>Attached files:</strong> 
                
                <ul id="list_files">
                
                </ul>

            </div>

            {% crispy form %}

        </div> <!-- /container -->
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        var ul = document.querySelector("#list_files");
        var label = document.createElement("label");

        var list = {{ list_files | safe}}

        for (file in list) {
            var li = document.createElement("li");
            var a = document.createElement("a");

            var string = list[file].file
            var route = {% get_media_prefix %} + list[file].file;

            a.setAttribute('href', route)
            a.innerHTML = (string).substring(8, string.length);

            li.appendChild(a);
            ul.appendChild(li);
        }
});

</script>

{% endblock %}